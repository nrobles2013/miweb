{"ast":null,"code":"import { UntypedFormGroup, UntypedFormControl, Validators } from '@angular/forms';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nimport { MatButton } from '@angular/material/button';\nimport { MatProgressBar } from '@angular/material/progress-bar';\nimport { Subject } from 'rxjs';\nimport { Usuario } from 'app/shared/models/usuario.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"app/shared/services/auth/jwt-auth.service\";\nimport * as i3 from \"app/shared/services/app-loader/app-loader.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/material/snack-bar\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/legacy-checkbox\";\nimport * as i8 from \"@angular/material/legacy-button\";\nimport * as i9 from \"@angular/material/legacy-form-field\";\nimport * as i10 from \"@angular/material/legacy-input\";\nimport * as i11 from \"@angular/material/legacy-core\";\nimport * as i12 from \"@angular/material/legacy-select\";\nimport * as i13 from \"@angular/material/divider\";\nimport * as i14 from \"@angular/flex-layout/flex\";\nimport * as i15 from \"../../../shared/components/perfect-scrollbar/perfect-scrollbar.directive\";\nfunction SignupComponent_mat_option_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const p_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", p_r1.idparticipe);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", p_r1.descripcion, \" \");\n  }\n}\nconst _c0 = function () {\n  return {};\n};\nexport let SignupComponent = /*#__PURE__*/(() => {\n  class SignupComponent {\n    constructor(fb, jwtAuth, egretLoader, router, route, _snackBar) {\n      this.fb = fb;\n      this.jwtAuth = jwtAuth;\n      this.egretLoader = egretLoader;\n      this.router = router;\n      this.route = route;\n      this._snackBar = _snackBar;\n      this.messageChange = new Subject();\n      this.errorMsg = '';\n      this.telefono = \"9999\";\n      this.celular = \"9999\";\n      this.tipoparticipe = [{\n        'idparticipe': '1',\n        'descripcion': 'Individual'\n      }, {\n        'idparticipe': '2',\n        'descripcion': 'Copropiedad'\n      }, {\n        'idparticipe': '3',\n        'descripcion': 'Sucesión'\n      }];\n      this._unsubscribeAll = new Subject();\n    }\n    ejecuto(event) {\n      this.idtipoparticipeSelected = event.value;\n    }\n    ngOnInit() {\n      this.signupForm = new UntypedFormGroup({\n        username: new UntypedFormControl(this.username, Validators.required),\n        password: new UntypedFormControl(this.password, Validators.required),\n        nombre: new UntypedFormControl(this.nombre, Validators.required),\n        apellido: new UntypedFormControl(this.apellido, Validators.required),\n        email: new UntypedFormControl(this.email, Validators.required),\n        agreed: new UntypedFormControl(true),\n        idtipoparticipeSelected: new UntypedFormControl(this.idtipoparticipeSelected, Validators.required)\n      });\n    }\n    ngAfterViewInit() {\n      //this.autoSignIn();\n    }\n    ngOnDestroy() {\n      this._unsubscribeAll.next(1);\n      this._unsubscribeAll.complete();\n    }\n    signAdd() {\n      if (this.signupForm.invalid) {\n        return;\n      }\n      const signinData = this.signupForm.value;\n      console.log(this.nombre + this.apellido);\n      this.usuario = new Usuario(this.username, this.password, this.nombre, this.apellido, this.email, this.telefono, this.celular, this.idtipoparticipeSelected);\n      this.jwtAuth.signadd(this.usuario).subscribe(response => {\n        const helper = new JwtHelperService();\n        console.log(response);\n        let token = JSON.stringify(response);\n        sessionStorage.setItem(this.jwtAuth.JWT_TOKEN, token);\n        let tk = JSON.parse(sessionStorage.getItem(this.jwtAuth.JWT_TOKEN));\n        const decodedToken = helper.decodeToken(tk.jwtToken);\n        this.jwtAuth.JWT_TOKEN = tk.jwtToken;\n        this.jwtAuth.user = {\n          'id': '5b700c45639d2c0c54b354ba',\n          displayName: this.username,\n          role: 'SA',\n          usuario_id: 0\n        };\n        this._snackBar.open(\"Accediendo\", 'INFO', {\n          duration: 3000,\n          horizontalPosition: 'right',\n          verticalPosition: 'top'\n        });\n        this.router.navigate(['/sessions/signin']);\n      }, err => {\n        //this.submitButton.disabled = false;\n        // this.progressBar.mode = 'determinate';\n        this._snackBar.open(\"Verificar datos\", 'INFO', {\n          duration: 3000,\n          horizontalPosition: 'right',\n          verticalPosition: 'top'\n        });\n      });\n    }\n    autoSignIn() {\n      if (this.jwtAuth.return === '/') {\n        return;\n      }\n      this.egretLoader.open(`Automatically Signing you in! \\n Return url: ${this.jwtAuth.return.substring(0, 20)}...`, {\n        width: '320px'\n      });\n      setTimeout(() => {\n        this.signAdd();\n        this.egretLoader.close();\n      }, 2000);\n    }\n    openSnackBar(message, action) {\n      this._snackBar.open(message, action);\n    }\n  }\n  SignupComponent.ɵfac = function SignupComponent_Factory(t) {\n    return new (t || SignupComponent)(i0.ɵɵdirectiveInject(i1.UntypedFormBuilder), i0.ɵɵdirectiveInject(i2.JwtAuthService), i0.ɵɵdirectiveInject(i3.AppLoaderService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i4.ActivatedRoute), i0.ɵɵdirectiveInject(i5.MatSnackBar));\n  };\n  SignupComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SignupComponent,\n    selectors: [[\"app-signup\"]],\n    viewQuery: function SignupComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatProgressBar, 5);\n        i0.ɵɵviewQuery(MatButton, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.progressBar = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.submitButton = _t.first);\n      }\n    },\n    decls: 41,\n    vars: 11,\n    consts: [[1, \"seciton-left\"], [1, \"section-left-content\"], [1, \"form-holder\", \"h-full-screen\", \"mat-elevation-z4\", \"mat-bg-card\", 3, \"perfectScrollbar\"], [\"fxLayout\", \"column\", \"fxLayoutAlign\", \"start\", 1, \"signup-form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"form-headline\", \"text-center\", \"mb-16\"], [1, \"text-muted\"], [\"fxLayout\", \"row wrap\", \"fxLayoutAlign\", \"center center\", 1, \"mb-32\"], [\"width\", \"300px\", \"src\", \"assets/Logo.jpg\", \"alt\", \"\"], [\"fxLayout\", \"row wrap\", \"fxLayoutGap.md\", \"16px\", \"fxLayoutGap.lg\", \"16px\"], [1, \"full-width\"], [\"placeholder\", \"seleccionar tipoparticipe\", \"formControlName\", \"idtipoparticipeSelected\", 3, \"ngModel\", \"selectionChange\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"fxFlex\", \"1 1 0%\", \"appearance\", \"outline\"], [\"formControlName\", \"nombre\", \"matInput\", \"\", \"type\", \"text\", \"name\", \"Last_name\", \"placeholder\", \"nombre\", 3, \"ngModel\", \"ngModelChange\"], [\"formControlName\", \"apellido\", \"matInput\", \"\", \"type\", \"text\", \"name\", \"apellido\", \"placeholder\", \"Last name\", 3, \"ngModel\", \"ngModelChange\"], [\"appearance\", \"outline\", 1, \"full-width\"], [\"matInput\", \"\", \"formControlName\", \"username\", \"type\", \"text\", \"name\", \"username\", \"placeholder\", \"Username\", 3, \"ngModel\", \"ngModelChange\"], [\"matInput\", \"\", \"formControlName\", \"email\", \"type\", \"email\", \"name\", \"email\", \"placeholder\", \"Email\", 3, \"ngModel\", \"ngModelChange\"], [\"matInput\", \"\", \"formControlName\", \"password\", \"type\", \"password\", \"name\", \"password\", \"placeholder\", \"********\", 3, \"ngModel\", \"ngModelChange\"], [\"formControlName\", \"agreed\", 1, \"mb-24\"], [\"mat-raised-button\", \"\", \"color\", \"primary\"], [1, \"my-32\"], [1, \"text-center\"], [1, \"mat-color-primary\", \"text-center\", \"full-width\", 3, \"routerLink\"], [3, \"value\"]],\n    template: function SignupComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"div\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 2)(3, \"form\", 3);\n        i0.ɵɵlistener(\"ngSubmit\", function SignupComponent_Template_form_ngSubmit_3_listener() {\n          return ctx.signAdd();\n        });\n        i0.ɵɵelementStart(4, \"div\", 4)(5, \"p\", 5);\n        i0.ɵɵtext(6, \"Registrar cuenta de acceso\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 6);\n        i0.ɵɵelement(8, \"img\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 8)(10, \"mat-form-field\", 9)(11, \"mat-select\", 10);\n        i0.ɵɵlistener(\"selectionChange\", function SignupComponent_Template_mat_select_selectionChange_11_listener($event) {\n          return ctx.ejecuto($event);\n        })(\"ngModelChange\", function SignupComponent_Template_mat_select_ngModelChange_11_listener($event) {\n          return ctx.idtipoparticipeSelected = $event;\n        });\n        i0.ɵɵtemplate(12, SignupComponent_mat_option_12_Template, 2, 2, \"mat-option\", 11);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(13, \"mat-form-field\", 12)(14, \"mat-label\");\n        i0.ɵɵtext(15, \"Nombre\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"input\", 13);\n        i0.ɵɵlistener(\"ngModelChange\", function SignupComponent_Template_input_ngModelChange_16_listener($event) {\n          return ctx.nombre = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(17, \"mat-form-field\", 12)(18, \"mat-label\");\n        i0.ɵɵtext(19, \"Apellido\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"input\", 14);\n        i0.ɵɵlistener(\"ngModelChange\", function SignupComponent_Template_input_ngModelChange_20_listener($event) {\n          return ctx.apellido = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(21, \"mat-form-field\", 15)(22, \"mat-label\");\n        i0.ɵɵtext(23, \"Username\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"input\", 16);\n        i0.ɵɵlistener(\"ngModelChange\", function SignupComponent_Template_input_ngModelChange_24_listener($event) {\n          return ctx.username = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(25, \"mat-form-field\", 15)(26, \"mat-label\");\n        i0.ɵɵtext(27, \"Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"input\", 17);\n        i0.ɵɵlistener(\"ngModelChange\", function SignupComponent_Template_input_ngModelChange_28_listener($event) {\n          return ctx.email = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(29, \"mat-form-field\", 15)(30, \"mat-label\");\n        i0.ɵɵtext(31, \"Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"input\", 18);\n        i0.ɵɵlistener(\"ngModelChange\", function SignupComponent_Template_input_ngModelChange_32_listener($event) {\n          return ctx.password = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(33, \"mat-checkbox\", 19);\n        i0.ɵɵtext(34, \"I agree with terms and condtions\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"button\", 20);\n        i0.ɵɵtext(36, \"Signup\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(37, \"mat-divider\", 21);\n        i0.ɵɵelementStart(38, \"div\", 22)(39, \"a\", 23);\n        i0.ɵɵtext(40, \"Sign in with an existing account\");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"perfectScrollbar\", i0.ɵɵpureFunction0(10, _c0));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.signupForm);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngModel\", ctx.idtipoparticipeSelected);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.tipoparticipe);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.nombre);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.apellido);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.username);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.email);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.password);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"routerLink\", \"/sessions/signin\");\n      }\n    },\n    dependencies: [i6.NgForOf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i7.MatLegacyCheckbox, i8.MatLegacyButton, i9.MatLegacyFormField, i9.MatLegacyLabel, i10.MatLegacyInput, i11.MatLegacyOption, i12.MatLegacySelect, i13.MatDivider, i14.DefaultLayoutDirective, i14.DefaultLayoutGapDirective, i14.DefaultLayoutAlignDirective, i14.DefaultFlexDirective, i15.PerfectScrollbarDirective, i4.RouterLink]\n  });\n  return SignupComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}