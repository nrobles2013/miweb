{"ast":null,"code":"import { MatTableDataSource } from '@angular/material/table';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MaterialModule } from 'app/app/mimodule/material.module';\nimport { Auditoria } from 'app/shared/models/auditoria.model';\nimport { MatSort } from '@angular/material/sort';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/services/reportes/riesgos.service\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"app/shared/services/reportes.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"app/shared/services/auth/jwt-auth.service\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"app/shared/services/auditoria.service\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"@angular/material/table\";\nimport * as i10 from \"@angular/material/paginator\";\nimport * as i11 from \"@angular/material/sort\";\nimport * as i12 from \"@angular/material/button\";\nimport * as i13 from \"@angular/flex-layout/extended\";\nfunction DocumentosComponent_th_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 13);\n    i0.ɵɵtext(1, \" Documentos\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    \"color\": a0,\n    \"color2\": a1\n  };\n};\nfunction DocumentosComponent_td_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(6, _c0, element_r6.id % 2 == 0, element_r6.id % 2 != 0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", element_r6.documento, \" Actualizado al: \", i0.ɵɵpipeBind2(2, 3, element_r6.fecha, \"dd/MM/yyyy\"), \" \");\n  }\n}\nfunction DocumentosComponent_th_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 15);\n    i0.ɵɵtext(1, \" Acciones \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DocumentosComponent_td_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 14)(1, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function DocumentosComponent_td_10_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const element_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.visualizaInfo(element_r7, 1));\n    });\n    i0.ɵɵtext(2, \" ver \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function DocumentosComponent_td_10_Template_button_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const element_r7 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.visualizaInfo(element_r7, 2));\n    });\n    i0.ɵɵtext(4, \" Enviar \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const element_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(1, _c0, element_r7.id % 2 == 0, element_r7.id % 2 != 0));\n  }\n}\nfunction DocumentosComponent_tr_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 17);\n  }\n}\nfunction DocumentosComponent_tr_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 18);\n  }\n}\nconst _c1 = function () {\n  return [5, 10, 20, 50, 100];\n};\nexport let DocumentosComponent = /*#__PURE__*/(() => {\n  class DocumentosComponent {\n    constructor(riesgoService, _snackBar, reportesService, fb, jwtAuth, router, route, auditoriaService) {\n      this.riesgoService = riesgoService;\n      this._snackBar = _snackBar;\n      this.reportesService = reportesService;\n      this.fb = fb;\n      this.jwtAuth = jwtAuth;\n      this.router = router;\n      this.route = route;\n      this.auditoriaService = auditoriaService;\n      //displayedColumns:string[] = ['documento', 'fecha', 'acciones'];\n      this.displayedColumns = ['documento', 'acciones'];\n      this.listinformacion = [];\n      this.totalElements = 0;\n    }\n    ngAfterViewInit() {\n      if (this.jwtAuth.user.cparticipe == \"99999\") {\n        this.router.navigate(['/sessions/signin']);\n      }\n    }\n    ngOnInit() {\n      this.jwtAuth.traerIP().subscribe(data => {\n        let date = new Date();\n        let ip = JSON.stringify(data.ip);\n        this.miip = ip;\n        this.auditoria = new Auditoria(this.miip, this.jwtAuth.user.usuario_id, this.jwtAuth.user.username, \"Gestiona Cuenta (documento) \", this.jwtAuth.user.idtipoparticipe, this.jwtAuth.user.cparticipe, date);\n        this.auditoriaService.insertar(this.auditoria).subscribe();\n      });\n      //this.jwtAuth.user.usuario_id\n      this.reportesService.getInformacionConsulta(\"0002\", this.jwtAuth.user.cparticipe).subscribe(response => {\n        console.log(response);\n        this.listinformacion = response;\n        this.createTable(this.listinformacion);\n        this.totalElements = response.length;\n      }, err => {\n        this.router.navigate(['/sessions/signin']);\n      });\n    }\n    visualizaInfo(event, bb) {\n      this.ruta = event.ruta;\n      this.nombredocumento = event.documento;\n      if (bb == 1) {\n        this.jwtAuth.traerIP().subscribe(data => {\n          let date = new Date();\n          let ip = JSON.stringify(data.ip);\n          this.miip = ip;\n          this.auditoria = new Auditoria(this.miip, this.jwtAuth.user.usuario_id, this.jwtAuth.user.username, \"visualiza documentos\", this.jwtAuth.user.idtipoparticipe, this.jwtAuth.user.cparticipe, date);\n          this.auditoriaService.insertar(this.auditoria).subscribe(response => {}, err => {\n            console.log(err);\n            this._snackBar.open(\"Verificar datos\", 'INFO', {\n              duration: 3000,\n              horizontalPosition: 'right',\n              verticalPosition: 'top'\n            });\n          });\n        });\n        this.reportesService.getVERPDF(this.ruta).subscribe(response => {\n          const file = new Blob([response], {\n            type: 'application/pdf'\n          });\n          const fileURL = URL.createObjectURL(file);\n          window.open(fileURL);\n          console.log(response);\n        }, err => {\n          console.log(err);\n          this._snackBar.open(\"Verificar datos\", 'INFO', {\n            duration: 3000,\n            horizontalPosition: 'right',\n            verticalPosition: 'top'\n          });\n        });\n        /* this.reportesService.getGereneratePDF(this.ruta).subscribe(\r\n           response =>{\r\n            const url = window.URL.createObjectURL(response);\r\n            console.log(\"sss\")\r\n             console.log(response)\r\n             const a = document.createElement('a');\r\n             a.setAttribute('style','display:none');\r\n             document.body.appendChild(a)\r\n             a.href=url\r\n             a.download=event.documento+\".pdf\";\r\n             a.click();\r\n           },\r\n           (err) => {\r\n             //this.submitButton.disabled = false;\r\n            // this.progressBar.mode = 'determinate';\r\n            console.log(err)\r\n            this._snackBar.open(\"Verificar datos\", 'INFO', {duration: 3000, horizontalPosition: 'right', verticalPosition: 'top'});\r\n           }\r\n         )*/\n      } else {\n        this.jwtAuth.traerIP().subscribe(data => {\n          let date = new Date();\n          let ip = JSON.stringify(data.ip);\n          this.miip = ip;\n          this.auditoria = new Auditoria(this.miip, this.jwtAuth.user.usuario_id, this.jwtAuth.user.username, \"Envio documentos\", this.jwtAuth.user.idtipoparticipe, this.jwtAuth.user.cparticipe, date);\n          this.auditoriaService.insertar(this.auditoria).subscribe();\n        });\n        this.reportesService.getFileRutaEnvioDocumentos(this.ruta, this.jwtAuth.user.cparticipe, \"9999\", this.nombredocumento, this.jwtAuth.user.correo).subscribe(response => {\n          let datosparse = JSON.stringify(response);\n          let mensaje = JSON.parse(datosparse);\n          this._snackBar.open(mensaje.mensaje, 'Informe', {\n            duration: 3000,\n            horizontalPosition: 'right',\n            verticalPosition: 'top'\n          });\n        });\n      }\n    }\n    listPageable(p, s) {\n      // return this.http.get<any>(`${this.url}/pageable?page=${p}&size=${s}`);\n    }\n    createTable(data) {\n      this.dataSource = new MatTableDataSource(data);\n      console.log(this.dataSource);\n      this.dataSource.paginator = this.paginator;\n      this.dataSource.sort = this.sort;\n    }\n    showMore(e) {\n      this.riesgoService.listPageable(e.pageIndex, e.pageSize).subscribe(data => {\n        this.totalElements = data.totalElements;\n        this.createTable(data.content);\n      });\n    }\n  }\n  DocumentosComponent.ɵfac = function DocumentosComponent_Factory(t) {\n    return new (t || DocumentosComponent)(i0.ɵɵdirectiveInject(i1.RiesgosService), i0.ɵɵdirectiveInject(i2.MatSnackBar), i0.ɵɵdirectiveInject(i3.ReportesService), i0.ɵɵdirectiveInject(i4.UntypedFormBuilder), i0.ɵɵdirectiveInject(i5.JwtAuthService), i0.ɵɵdirectiveInject(i6.Router), i0.ɵɵdirectiveInject(i6.ActivatedRoute), i0.ɵɵdirectiveInject(i7.AuditoriaService));\n  };\n  DocumentosComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DocumentosComponent,\n    selectors: [[\"app-documentos\"]],\n    viewQuery: function DocumentosComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatPaginator, 5);\n        i0.ɵɵviewQuery(MaterialModule, 5);\n        i0.ɵɵviewQuery(MatSort, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.materialModule = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n      }\n    },\n    decls: 16,\n    vars: 6,\n    consts: [[1, \"body-container\"], [1, \"mat-elevation-10\"], [\"id\", \"informacion\"], [1, \"example-container2\"], [\"mat-table\", \"\", \"matSort\", \"\", \"perfectScrollbar\", \"\", 3, \"dataSource\"], [\"matColumnDef\", \"documento\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 3, \"ngClass\", 4, \"matCellDef\"], [\"matColumnDef\", \"acciones\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"aria-label\", \"Select page of documentos\", 3, \"pageSizeOptions\", \"length\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\"], [\"mat-cell\", \"\", 3, \"ngClass\"], [\"mat-header-cell\", \"\"], [\"mat-button\", \"\", \"color\", \"black\", 2, \"color\", \"black\", 3, \"click\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n    template: function DocumentosComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"body\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"table\", 4);\n        i0.ɵɵelementContainerStart(5, 5);\n        i0.ɵɵtemplate(6, DocumentosComponent_th_6_Template, 2, 0, \"th\", 6);\n        i0.ɵɵtemplate(7, DocumentosComponent_td_7_Template, 3, 9, \"td\", 7);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(8, 8);\n        i0.ɵɵtemplate(9, DocumentosComponent_th_9_Template, 2, 0, \"th\", 9);\n        i0.ɵɵtemplate(10, DocumentosComponent_td_10_Template, 5, 4, \"td\", 7);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(11, DocumentosComponent_tr_11_Template, 1, 0, \"tr\", 10);\n        i0.ɵɵtemplate(12, DocumentosComponent_tr_12_Template, 1, 0, \"tr\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"mat-paginator\", 12);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(14, \"p\")(15, \"p\");\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"pageSizeOptions\", i0.ɵɵpureFunction0(5, _c1))(\"length\", ctx.totalElements);\n      }\n    },\n    dependencies: [i8.NgClass, i9.MatTable, i9.MatHeaderCellDef, i9.MatHeaderRowDef, i9.MatColumnDef, i9.MatCellDef, i9.MatRowDef, i9.MatHeaderCell, i9.MatCell, i9.MatHeaderRow, i9.MatRow, i10.MatPaginator, i11.MatSort, i11.MatSortHeader, i12.MatButton, i13.DefaultClassDirective, i8.DatePipe],\n    styles: [\"html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;height:100%;font-family:Roboto,Arial,sans-serif}my-app[_ngcontent-%COMP%]{display:block;height:100vh}.mat-elevation-10[_ngcontent-%COMP%]{width:1200px;box-sizing:border-box;border-radius:21px 21px 21px 20px;-webkit-border-radius:21px 21px 21px 20px;-moz-border-radius:21px 21px 21px 20px}.color[_ngcontent-%COMP%]{color:#302e2e;background-color:#e4cf84}.color2[_ngcontent-%COMP%]{color:#fff;background-color:#1a2f52}.color3[_ngcontent-%COMP%]{color:#302e2e;background-color:#e4cf84}.color4[_ngcontent-%COMP%]{color:#050505;background-color:#6088cd}.btn[_ngcontent-%COMP%]{width:80px;height:60px}.body-container[_ngcontent-%COMP%]{display:flex;background-color:#f6f6f9b4}.example-container[_ngcontent-%COMP%], .example-container2[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;background-color:#f6f6f9b4}.app_example-container2[_ngcontent-%COMP%]{margin-left:10px;padding:0;width:100%;background-color:#b3842eb4;border-radius:10px}.example-container3[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;background-color:#bebebff6}.example-container4[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;background-color:#bebebff6;font-weight:700}.new-row[_ngcontent-%COMP%]{background-color:#4216b9}.header-container2[_ngcontent-%COMP%]{width:25%}.header-container3[_ngcontent-%COMP%]{width:30%}.example-spacer[_ngcontent-%COMP%]{flex:3 12 auto}.example-tabla[_ngcontent-%COMP%]{background-color:#7fffd4}table[_ngcontent-%COMP%]{background-color:#c9cbcb;border-radius:20px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{background-color:#fcfdfc}button[_ngcontent-%COMP%]{border-radius:21px 21px 21px 20px;-webkit-border-radius:21px 21px 21px 20px;-moz-border-radius:21px 21px 21px 20px;background-color:#faebd7;color:#000}a[_ngcontent-%COMP%]{border-radius:25% 10%;background-color:#faebd7;color:#000}.rectangulo[_ngcontent-%COMP%]{border-radius:10px}.imagenlupa[_ngcontent-%COMP%]{width:80px;height:20px;margin:0 auto}\"]\n  });\n  return DocumentosComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}