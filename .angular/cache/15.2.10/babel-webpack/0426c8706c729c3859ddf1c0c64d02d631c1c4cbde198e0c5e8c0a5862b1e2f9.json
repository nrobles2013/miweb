{"ast":null,"code":"import { UntypedFormGroup, UntypedFormControl, Validators } from '@angular/forms';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MaterialModule } from 'app/app/mimodule/material.module';\nimport { Auditoria } from 'app/shared/models/auditoria.model';\nimport { MatSort } from '@angular/material/sort';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/services/reportes/riesgos.service\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"app/shared/services/reportes.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"app/shared/services/auth/jwt-auth.service\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"app/shared/services/auditoria.service\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"@angular/material/table\";\nimport * as i10 from \"@angular/material/paginator\";\nimport * as i11 from \"@angular/material/form-field\";\nimport * as i12 from \"@angular/material/sort\";\nimport * as i13 from \"@angular/material/button\";\nimport * as i14 from \"@angular/material/icon\";\nimport * as i15 from \"@angular/flex-layout/extended\";\nfunction NotificacionesComponent_th_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 23);\n    i0.ɵɵtext(1, \" Fecha\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    \"color\": a0,\n    \"color2\": a1\n  };\n};\nfunction NotificacionesComponent_td_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(5, _c0, element_r8.id % 2 == 0, element_r8.id % 2 != 0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 2, element_r8.fecha, \"dd/MM/yyyy\"), \" \");\n  }\n}\nfunction NotificacionesComponent_th_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 23);\n    i0.ɵɵtext(1, \" Asunto\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NotificacionesComponent_td_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r9 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(2, _c0, element_r9.id % 2 == 0, element_r9.id % 2 != 0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r9.asunto, \" \");\n  }\n}\nfunction NotificacionesComponent_th_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 25);\n    i0.ɵɵtext(1, \" Acci\\u00F3n \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NotificacionesComponent_td_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 24)(1, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function NotificacionesComponent_td_14_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const element_r10 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.visualizaInfo(\"#informacion\", element_r10));\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\", 19);\n    i0.ɵɵtext(3, \"drafts\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const element_r10 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(1, _c0, element_r10.id % 2 == 0, element_r10.id % 2 != 0));\n  }\n}\nfunction NotificacionesComponent_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 26);\n  }\n}\nfunction NotificacionesComponent_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 27);\n  }\n}\nconst _c1 = function () {\n  return [5, 10, 20, 50, 100];\n};\nexport let NotificacionesComponent = /*#__PURE__*/(() => {\n  class NotificacionesComponent {\n    constructor(riesgoService, _snackBar, reportesService, fb, jwtAuth, router, route, auditoriaService) {\n      this.riesgoService = riesgoService;\n      this._snackBar = _snackBar;\n      this.reportesService = reportesService;\n      this.fb = fb;\n      this.jwtAuth = jwtAuth;\n      this.router = router;\n      this.route = route;\n      this.auditoriaService = auditoriaService;\n      this.displayedColumns = ['fecha', 'asunto', 'accion'];\n      this.listinformacion = [];\n      this.totalElements = 0;\n    }\n    ngAfterViewInit() {\n      if (this.jwtAuth.user.cparticipe == \"99999\") {\n        this.router.navigate(['/sessions/signin']);\n      }\n    }\n    ngOnInit() {\n      this.notificacionForm = new UntypedFormGroup({\n        fecha: new UntypedFormControl(this.fecha, Validators.required),\n        asunto: new UntypedFormControl(this.asunto, Validators.required),\n        mensaje: new UntypedFormControl(this.mensaje, Validators.required)\n      });\n      this.jwtAuth.traerIP().subscribe(data => {\n        let date = new Date();\n        let ip = JSON.stringify(data.ip);\n        this.miip = ip;\n        this.auditoria = new Auditoria(this.miip, this.jwtAuth.user.usuario_id, this.jwtAuth.user.username, \"Consulta información de interes\", this.jwtAuth.user.idtipoparticipe, this.jwtAuth.user.cparticipe, date);\n        this.auditoriaService.insertar(this.auditoria).subscribe();\n      });\n      //this.jwtAuth.user.usuario_id\n      this.reportesService.getListaNotificacion().subscribe(response => {\n        console.log(response);\n        this.listinformacion = response;\n        this.createTable(this.listinformacion);\n        this.totalElements = response.length;\n      }, err => {\n        this.router.navigate(['/sessions/signin']);\n      });\n    }\n    visualizaInfo(selector, el) {\n      this.datos = el;\n      this.asunto = el.asunto;\n      this.fecha = el.fecha;\n      this.mensaje = el.mensaje;\n      console.log(selector);\n      var elemento = document.querySelector(selector);\n      if (selector == '#informacion2') {\n        if (elemento != null) {\n          elemento.style.display = 'none';\n          selector = '#informacion';\n          var elementoprin = document.querySelector(selector);\n          elementoprin.style.display = 'block';\n        }\n      } else {\n        if (elemento != null) {\n          elemento.style.display = 'none';\n          selector = '#informacion2';\n          var elementoprin = document.querySelector(selector);\n          elementoprin.style.display = 'block';\n        }\n      }\n    }\n    listPageable(p, s) {\n      // return this.http.get<any>(`${this.url}/pageable?page=${p}&size=${s}`);\n    }\n    createTable(data) {\n      this.dataSource = new MatTableDataSource(data);\n      console.log(this.dataSource);\n      this.dataSource.paginator = this.paginator;\n      this.dataSource.sort = this.sort;\n    }\n    showMore(e) {\n      this.riesgoService.listPageable(e.pageIndex, e.pageSize).subscribe(data => {\n        this.totalElements = data.totalElements;\n        this.createTable(data.content);\n      });\n    }\n  }\n  NotificacionesComponent.ɵfac = function NotificacionesComponent_Factory(t) {\n    return new (t || NotificacionesComponent)(i0.ɵɵdirectiveInject(i1.RiesgosService), i0.ɵɵdirectiveInject(i2.MatSnackBar), i0.ɵɵdirectiveInject(i3.ReportesService), i0.ɵɵdirectiveInject(i4.UntypedFormBuilder), i0.ɵɵdirectiveInject(i5.JwtAuthService), i0.ɵɵdirectiveInject(i6.Router), i0.ɵɵdirectiveInject(i6.ActivatedRoute), i0.ɵɵdirectiveInject(i7.AuditoriaService));\n  };\n  NotificacionesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NotificacionesComponent,\n    selectors: [[\"app-notificaciones\"]],\n    viewQuery: function NotificacionesComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatPaginator, 5);\n        i0.ɵɵviewQuery(MaterialModule, 5);\n        i0.ɵɵviewQuery(MatSort, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.materialModule = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n      }\n    },\n    decls: 51,\n    vars: 12,\n    consts: [[1, \"body-container\"], [1, \"mat-elevation-10\"], [\"id\", \"informacion\"], [1, \"example-container2\"], [1, \"example-container3\"], [\"mat-table\", \"\", \"matSort\", \"\", \"perfectScrollbar\", \"\", 3, \"dataSource\"], [\"matColumnDef\", \"fecha\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 3, \"ngClass\", 4, \"matCellDef\"], [\"matColumnDef\", \"asunto\"], [\"matColumnDef\", \"accion\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"aria-label\", \"Select page of documentos\", 3, \"pageSizeOptions\", \"length\"], [\"id\", \"informacion2\"], [1, \"example-container\"], [1, \"example-container4\"], [\"mat-button\", \"\", \"color\", \"primary\", 3, \"click\"], [2, \"color\", \"red\"], [1, \"example-spacer\"], [1, \"example-asunto\"], [1, \"example-mensaje\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\"], [\"mat-cell\", \"\", 3, \"ngClass\"], [\"mat-header-cell\", \"\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n    template: function NotificacionesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"body\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"table\", 5);\n        i0.ɵɵelementContainerStart(6, 6);\n        i0.ɵɵtemplate(7, NotificacionesComponent_th_7_Template, 2, 0, \"th\", 7);\n        i0.ɵɵtemplate(8, NotificacionesComponent_td_8_Template, 3, 8, \"td\", 8);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(9, 9);\n        i0.ɵɵtemplate(10, NotificacionesComponent_th_10_Template, 2, 0, \"th\", 7);\n        i0.ɵɵtemplate(11, NotificacionesComponent_td_11_Template, 2, 5, \"td\", 8);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(12, 10);\n        i0.ɵɵtemplate(13, NotificacionesComponent_th_13_Template, 2, 0, \"th\", 11);\n        i0.ɵɵtemplate(14, NotificacionesComponent_td_14_Template, 4, 4, \"td\", 8);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(15, NotificacionesComponent_tr_15_Template, 1, 0, \"tr\", 12);\n        i0.ɵɵtemplate(16, NotificacionesComponent_tr_16_Template, 1, 0, \"tr\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(17, \"mat-paginator\", 14);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(18, \"div\", 15)(19, \"div\", 16)(20, \"div\", 3)(21, \"div\", 17)(22, \"button\", 18);\n        i0.ɵɵlistener(\"click\", function NotificacionesComponent_Template_button_click_22_listener() {\n          return ctx.visualizaInfo(\"#informacion2\", \"\");\n        });\n        i0.ɵɵelementStart(23, \"mat-icon\", 19);\n        i0.ɵɵtext(24, \"keyboard_return\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(25, \"span\", 20)(26, \"span\", 20)(27, \"span\", 20)(28, \"span\", 20);\n        i0.ɵɵelementStart(29, \"mat-label\");\n        i0.ɵɵtext(30, \"fecha: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"mat-label\");\n        i0.ɵɵtext(32);\n        i0.ɵɵpipe(33, \"date\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(34, \"p\")(35, \"p\");\n        i0.ɵɵelementStart(36, \"div\", 17)(37, \"mat-label\");\n        i0.ɵɵtext(38, \"Asunto:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"div\", 21)(40, \"p\")(41, \"mat-label\");\n        i0.ɵɵtext(42);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(43, \"p\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"p\")(45, \"mat-label\");\n        i0.ɵɵtext(46, \"mensaje:\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(47, \"p\");\n        i0.ɵɵelementStart(48, \"div\", 22)(49, \"mat-label\");\n        i0.ɵɵtext(50);\n        i0.ɵɵelementEnd()()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"pageSizeOptions\", i0.ɵɵpureFunction0(11, _c1))(\"length\", ctx.totalElements);\n        i0.ɵɵadvance(15);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(33, 8, ctx.fecha, \"dd/MM/yyyy\"));\n        i0.ɵɵadvance(10);\n        i0.ɵɵtextInterpolate(ctx.asunto);\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate(ctx.mensaje);\n      }\n    },\n    dependencies: [i8.NgClass, i9.MatTable, i9.MatHeaderCellDef, i9.MatHeaderRowDef, i9.MatColumnDef, i9.MatCellDef, i9.MatRowDef, i9.MatHeaderCell, i9.MatCell, i9.MatHeaderRow, i9.MatRow, i10.MatPaginator, i11.MatLabel, i12.MatSort, i12.MatSortHeader, i13.MatButton, i14.MatIcon, i15.DefaultClassDirective, i8.DatePipe],\n    styles: [\"html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;height:100%;font-family:Roboto,Arial,sans-serif}my-app[_ngcontent-%COMP%]{display:block;height:100vh}.color[_ngcontent-%COMP%]{color:#302e2e;background-color:#e4cf84}.color2[_ngcontent-%COMP%]{color:#fff;background-color:#1a2f52}.container[_ngcontent-%COMP%]{padding:24px;box-sizing:border-box;border-radius:25% 10%}.mat-checkbox-label[_ngcontent-%COMP%]{text-transform:capitalize}.btn[_ngcontent-%COMP%]{width:80px;height:60px}.body-container[_ngcontent-%COMP%]{display:flex;background-color:#f6f6f9b4}.example-container[_ngcontent-%COMP%], .example-container2[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;background-color:#f6f6f9b4}.example-container3[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;background-color:#bebebff6}.example-container4[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;background-color:#bebebff6;font-weight:700}.new-row[_ngcontent-%COMP%]{background-color:#4216b9}.header-container2[_ngcontent-%COMP%]{width:25%}.header-container3[_ngcontent-%COMP%]{width:30%}.example-spacer[_ngcontent-%COMP%]{flex:6 42 auto;content:\\\" / \\\";padding:20px 50px}.example-tabla[_ngcontent-%COMP%]{background-color:#7fffd4}table[_ngcontent-%COMP%]{background-color:#c9cbcb;border-radius:20px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{background-color:#fcfdfc}.rectangulo[_ngcontent-%COMP%]{border-radius:10px}.imagenlupa[_ngcontent-%COMP%]{width:80px;height:20px;margin:0 auto}#informacion[_ngcontent-%COMP%]{display:block;background-color:#bebebff6}#informacion2[_ngcontent-%COMP%]{display:none;background-color:#bebebff6}.example-asunto[_ngcontent-%COMP%], .example-mensaje[_ngcontent-%COMP%]{width:100%;margin:20px;border-color:#000;box-shadow:1px;font-weight:700}.mat-elevation-10[_ngcontent-%COMP%]{width:1200px;border-radius:21px 21px 21px 20px;-webkit-border-radius:21px 21px 21px 20px;-moz-border-radius:21px 21px 21px 20px;background-color:#e4cf84}\"]\n  });\n  return NotificacionesComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}