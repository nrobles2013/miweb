{"ast":null,"code":"import { MatTableDataSource } from '@angular/material/table';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MaterialModule } from 'app/app/mimodule/material.module';\nimport { Auditoria } from 'app/shared/models/auditoria.model';\nimport { MatSort } from '@angular/material/sort';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/services/reportes/riesgos.service\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"app/shared/services/reportes.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"app/shared/services/auth/jwt-auth.service\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"app/shared/services/auditoria.service\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"@angular/material/table\";\nimport * as i10 from \"@angular/material/paginator\";\nimport * as i11 from \"@angular/material/sort\";\nimport * as i12 from \"@angular/material/button\";\nimport * as i13 from \"@angular/material/icon\";\nimport * as i14 from \"@angular/flex-layout/extended\";\nfunction InteresComponent_th_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 13);\n    i0.ɵɵtext(1, \" Documentos\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    \"color\": a0,\n    \"color2\": a1\n  };\n};\nfunction InteresComponent_td_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(2, _c0, element_r8.id % 2 == 0, element_r8.id % 2 != 0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r8.documento, \" \");\n  }\n}\nfunction InteresComponent_th_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 13);\n    i0.ɵɵtext(1, \" Fecha Actualizaci\\u00F3n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction InteresComponent_td_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r9 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(5, _c0, element_r9.id % 2 == 0, element_r9.id % 2 != 0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 2, element_r9.fecha, \"dd/MM/yyyy\"), \" \");\n  }\n}\nfunction InteresComponent_th_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 15);\n    i0.ɵɵtext(1, \" Acci\\u00F3n \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction InteresComponent_td_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 14)(1, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function InteresComponent_td_12_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const element_r10 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.visualizaInfo(element_r10.ruta));\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\", 17);\n    i0.ɵɵtext(3, \"search icon\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const element_r10 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(1, _c0, element_r10.id % 2 == 0, element_r10.id % 2 != 0));\n  }\n}\nfunction InteresComponent_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 18);\n  }\n}\nfunction InteresComponent_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 19);\n  }\n}\nconst _c1 = function () {\n  return [5, 10, 20, 50, 100];\n};\nexport let InteresComponent = /*#__PURE__*/(() => {\n  class InteresComponent {\n    constructor(riesgoService, _snackBar, reportesService, fb, jwtAuth, router, route, auditoriaService) {\n      this.riesgoService = riesgoService;\n      this._snackBar = _snackBar;\n      this.reportesService = reportesService;\n      this.fb = fb;\n      this.jwtAuth = jwtAuth;\n      this.router = router;\n      this.route = route;\n      this.auditoriaService = auditoriaService;\n      this.displayedColumns = ['documento', 'fecha', 'accion'];\n      this.listinformacion = [];\n      this.totalElements = 0;\n    }\n    ngAfterViewInit() {\n      if (this.jwtAuth.user.cparticipe == \"99999\") {\n        this.router.navigate(['/sessions/signin']);\n      }\n    }\n    ngOnInit() {\n      this.jwtAuth.traerIP().subscribe(data => {\n        let date = new Date();\n        let ip = JSON.stringify(data.ip);\n        this.miip = ip;\n        this.auditoria = new Auditoria(this.miip, this.jwtAuth.user.usuario_id, this.jwtAuth.user.username, \"Consulta información de interes\", this.jwtAuth.user.idtipoparticipe, this.jwtAuth.user.cparticipe, date);\n        this.auditoriaService.insertar(this.auditoria).subscribe();\n      });\n      //this.jwtAuth.user.usuario_id\n      this.reportesService.getInformacionConsulta(\"0003\", \"9999\").subscribe(response => {\n        console.log(response);\n        this.listinformacion = response;\n        this.createTable(this.listinformacion);\n        this.totalElements = response.length;\n      }, err => {\n        this.router.navigate(['/sessions/signin']);\n      });\n    }\n    visualizaInfo(event) {\n      this.ruta = event;\n      this.jwtAuth.traerIP().subscribe(data => {\n        let date = new Date();\n        let ip = JSON.stringify(data.ip);\n        this.miip = ip;\n        this.auditoria = new Auditoria(this.miip, this.jwtAuth.user.usuario_id, this.jwtAuth.user.username, \"documentos interes\", this.jwtAuth.user.idtipoparticipe, this.jwtAuth.user.cparticipe, date);\n        this.auditoriaService.insertar(this.auditoria).subscribe(response => {}, err => {\n          console.log(err);\n          this._snackBar.open(\"Verificar datos\", 'INFO', {\n            duration: 3000,\n            horizontalPosition: 'right',\n            verticalPosition: 'top'\n          });\n        });\n      });\n      this.reportesService.getVERPDF(this.ruta).subscribe(response => {\n        const file = new Blob([response], {\n          type: 'application/pdf'\n        });\n        const fileURL = URL.createObjectURL(file);\n        window.open(fileURL);\n        console.log(response);\n      }, err => {\n        console.log(err);\n        this._snackBar.open(\"Verificar datos\", 'INFO', {\n          duration: 3000,\n          horizontalPosition: 'right',\n          verticalPosition: 'top'\n        });\n      });\n    }\n    listPageable(p, s) {\n      // return this.http.get<any>(`${this.url}/pageable?page=${p}&size=${s}`);\n    }\n    createTable(data) {\n      this.dataSource = new MatTableDataSource(data);\n      console.log(this.dataSource);\n      this.dataSource.paginator = this.paginator;\n      this.dataSource.sort = this.sort;\n    }\n    showMore(e) {\n      this.riesgoService.listPageable(e.pageIndex, e.pageSize).subscribe(data => {\n        this.totalElements = data.totalElements;\n        this.createTable(data.content);\n      });\n    }\n  }\n  InteresComponent.ɵfac = function InteresComponent_Factory(t) {\n    return new (t || InteresComponent)(i0.ɵɵdirectiveInject(i1.RiesgosService), i0.ɵɵdirectiveInject(i2.MatSnackBar), i0.ɵɵdirectiveInject(i3.ReportesService), i0.ɵɵdirectiveInject(i4.UntypedFormBuilder), i0.ɵɵdirectiveInject(i5.JwtAuthService), i0.ɵɵdirectiveInject(i6.Router), i0.ɵɵdirectiveInject(i6.ActivatedRoute), i0.ɵɵdirectiveInject(i7.AuditoriaService));\n  };\n  InteresComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: InteresComponent,\n    selectors: [[\"app-interes\"]],\n    viewQuery: function InteresComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatPaginator, 5);\n        i0.ɵɵviewQuery(MaterialModule, 5);\n        i0.ɵɵviewQuery(MatSort, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.materialModule = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n      }\n    },\n    decls: 18,\n    vars: 6,\n    consts: [[1, \"body-container\"], [1, \"mat-elevation-10\"], [1, \"example-container3\"], [\"mat-table\", \"\", \"matSort\", \"\", 3, \"dataSource\"], [\"matColumnDef\", \"documento\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 3, \"ngClass\", 4, \"matCellDef\"], [\"matColumnDef\", \"fecha\"], [\"matColumnDef\", \"accion\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"aria-label\", \"Select page of documentos\", 3, \"pageSizeOptions\", \"length\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\"], [\"mat-cell\", \"\", 3, \"ngClass\"], [\"mat-header-cell\", \"\"], [\"mat-button\", \"\", \"color\", \"primary\", 3, \"click\"], [2, \"color\", \"red\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n    template: function InteresComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"table\", 3);\n        i0.ɵɵelementContainerStart(4, 4);\n        i0.ɵɵtemplate(5, InteresComponent_th_5_Template, 2, 0, \"th\", 5);\n        i0.ɵɵtemplate(6, InteresComponent_td_6_Template, 2, 5, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(7, 7);\n        i0.ɵɵtemplate(8, InteresComponent_th_8_Template, 2, 0, \"th\", 5);\n        i0.ɵɵtemplate(9, InteresComponent_td_9_Template, 3, 8, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(10, 8);\n        i0.ɵɵtemplate(11, InteresComponent_th_11_Template, 2, 0, \"th\", 9);\n        i0.ɵɵtemplate(12, InteresComponent_td_12_Template, 4, 4, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(13, InteresComponent_tr_13_Template, 1, 0, \"tr\", 10);\n        i0.ɵɵtemplate(14, InteresComponent_tr_14_Template, 1, 0, \"tr\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"mat-paginator\", 12);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(16, \"p\")(17, \"p\");\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"pageSizeOptions\", i0.ɵɵpureFunction0(5, _c1))(\"length\", ctx.totalElements);\n      }\n    },\n    dependencies: [i8.NgClass, i9.MatTable, i9.MatHeaderCellDef, i9.MatHeaderRowDef, i9.MatColumnDef, i9.MatCellDef, i9.MatRowDef, i9.MatHeaderCell, i9.MatCell, i9.MatHeaderRow, i9.MatRow, i10.MatPaginator, i11.MatSort, i11.MatSortHeader, i12.MatButton, i13.MatIcon, i14.DefaultClassDirective, i8.DatePipe],\n    styles: [\"html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;height:100%;font-family:Roboto,Arial,sans-serif}.body-container[_ngcontent-%COMP%]{display:flex;background-color:#f6f6f9b4}.mat-elevation-10[_ngcontent-%COMP%]{width:1200px;box-sizing:border-box;border-radius:21px 21px 21px 20px;-webkit-border-radius:21px 21px 21px 20px;-moz-border-radius:21px 21px 21px 20px}my-app[_ngcontent-%COMP%]{display:block;height:100vh}.color[_ngcontent-%COMP%]{color:#302e2e;background-color:#e4cf84}.color2[_ngcontent-%COMP%]{color:#fff;background-color:#1a2f52}.container[_ngcontent-%COMP%]{padding:24px;box-sizing:border-box;border-radius:25% 10%}.mat-checkbox-label[_ngcontent-%COMP%]{text-transform:capitalize}.btn[_ngcontent-%COMP%]{width:80px;height:60px}.example-container2[_ngcontent-%COMP%]{margin:20px;padding:0;width:100%;background-color:#f6f6f9b4}.example-container3[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;background-color:#bebebff6}.new-row[_ngcontent-%COMP%]{background-color:#4216b9}.header-container2[_ngcontent-%COMP%]{width:25%}.header-container3[_ngcontent-%COMP%]{width:30%}.example-spacer[_ngcontent-%COMP%]{flex:3 12 auto}.example-tabla[_ngcontent-%COMP%]{background-color:#7fffd4}table[_ngcontent-%COMP%]{background-color:#c9cbcb;border-radius:20px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{background-color:#fcfdfc}.rectangulo[_ngcontent-%COMP%]{border-radius:10px}.imagenlupa[_ngcontent-%COMP%]{width:80px;height:20px;margin:0 auto}\"]\n  });\n  return InteresComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}